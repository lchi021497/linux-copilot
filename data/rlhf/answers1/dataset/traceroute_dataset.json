{"prompt": ["Suppose that we do a traceroute www.google.com, then the parameter \"max hops\" will be set to 30 by default since we didn't specify it.Now lets say that somehow the traceroute reaches the 30th hop before finding www.google.com, what would be the response given by the 30th router? is it a \"port unreachable\" response (like the destiny host would answer if we had reached him) or is it an ICMP response indicating that max hops was reached?", "Every night I go through the same process of checking failover systems for our T1's. I essentially go through the following process:Start the failover process.traceroute $server;\nOnce I see it's failed over, I verify that connections work by SSHing into a server.ssh $server;\nThen once I see it works, I take it off of failover.So what I want to do is to continually run a traceroute until I get a certain result, then run a SSH command."], "chosen": ["\nThe response will be an ICMP response with TTL time expired like the previous hops. The difference between hops is only the TTL field. The routers on the path to www.google.com don't know you are trying to traceroute to google and infact don't know how many hops are between you and them. The way traceroute works is by sending packets with increasing TTL's until reaching the destination. Until reaching the destination most of the replies you will get are TTL time expired unless some other error has occured.\n", "\nI think you could be better off using ping command to verify server's accessability than traceroute.\nIt is easy to check for return status of ping command without using any grep at all:\nif [ ping -c 4 -n -q 10.10.10.10 >/dev/null 2>& ]; then\n    echo \"Server is ok\"\nelse\n    echo \"Server is down\"\nfi\n\nIf you want to do it continually in a loop, try this:\nfunction check_ssh {\n    # do your ssh stuff here\n    echo \"performing ssh test\"\n}\nwhile : ; do\n    if [ ping -c 4 -n -q 10.10.10.10 >/dev/null 2>& ]; then\n        echo \"Server is ok\"\n        check_ssh\n    else\n        echo \"Server is down\"\n    fi\n    sleep 60\ndone\n\n"], "rejected": ["\ncurrently the max hop can be set to 255\n$ traceroute -m 255 www.google.com\n\nif the destination is not reached before the max hop. it sends the acknowledgement\nback to the source indicating packet is dead.\n", "\nPut your list of successful messages in a file (omit the variable lines and fractions of the line, and use a ^ to identify the start of the line, as such:)\npatterns.list:\n^ 7  4.68.63.165 \n^ 8  4.68.17.133 \n^ 9  4.79.168.210 \n^10  216.239.48.108 \n^11  66.249.94.46 \n^12  72.14.204.99 \n\nThen a simple while loop:\nwhile ! traceroute -n ${TARGET} | grep -f patterns.list\ndo\n  sleep 5   # 5 second delay between traceroutes, for niceness.\ndone\nssh ${DESTINATION}\n\nUse traceroute -n to generate the output so you don't get an IP address that resolves one time, but and a name the next, resulting in a false positive.\n"]}